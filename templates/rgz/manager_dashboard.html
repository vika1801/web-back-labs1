{% extends "base1.html" %}

{% block title %}–ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º–µ–Ω–µ–¥–∂–µ—Ä–∞{% endblock %}

{% block content %}
<div class="dashboard">
    <!-- –ö–∞—Ä—Ç–æ—á–∫–∞ –±–∞–ª–∞–Ω—Å–∞ –º–µ–Ω–µ–¥–∂–µ—Ä–∞ -->
    <div class="balance-card manager">
        <h2 id="balance">{{ "%.2f"|format(user.balance) }} ‚ÇΩ</h2>
        <p>–ë–∞–ª–∞–Ω—Å –º–µ–Ω–µ–¥–∂–µ—Ä–∞</p>
        <p style="margin-top: 10px; font-size: 0.9rem;">
            –ù–æ–º–µ—Ä —Å—á–µ—Ç–∞: <strong>{{ user.account_number }}</strong> | üë®‚Äçüíº –ú–µ–Ω–µ–¥–∂–µ—Ä
        </p>
    </div>
    
    <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –º–µ–Ω–µ–¥–∂–µ—Ä–µ -->
    <div class="grid">
        <div class="card">
            <h3>üë®‚Äçüíº –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –º–µ–Ω–µ–¥–∂–µ—Ä–∞</h3>
            <p><strong>–§–ò–û:</strong> {{ user.full_name }}</p>
            <p><strong>–õ–æ–≥–∏–Ω:</strong> {{ user.login }}</p>
            <p><strong>–¢–µ–ª–µ—Ñ–æ–Ω:</strong> {{ user.phone or '–ù–µ —É–∫–∞–∑–∞–Ω' }}</p>
            <p><strong>–°—Ç–∞—Ç—É—Å:</strong> <span style="color: #007bff; font-weight: bold;">–ú–µ–Ω–µ–¥–∂–µ—Ä</span></p>
        </div>
        
        <div class="card">
            <h3>‚öôÔ∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º–æ–π</h3>
            <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                <button class="btn btn-primary" onclick="loadUsers()">
                    üë• –í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
                </button>
                <button class="btn btn-success" onclick="showCreateUserForm()">
                    ‚ûï –°–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                </button>
                <button class="btn btn-secondary" onclick="loadHistory()">
                    üìä –ò—Å—Ç–æ—Ä–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π
                </button>
                <button class="btn btn-primary" onclick="showTransferForm()">
                    üí∏ –ü–µ—Ä–µ–≤–æ–¥ –¥–µ–Ω–µ–≥
                </button>
            </div>
        </div>
    </div>
    
    <!-- –§–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è -->
    <div id="createUserForm" class="form-section hidden">
        <h3>üë§ –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</h3>
        <form id="createUserFormElement">
            <div class="form-row">
                <div class="form-group">
                    <label>–§–ò–û *:</label>
                    <input type="text" name="full_name" required 
                           placeholder="–ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤–∏—á">
                </div>
                
                <div class="form-group">
                    <label>–õ–æ–≥–∏–Ω *:</label>
                    <input type="text" name="login" required 
                           placeholder="–õ–∞—Ç–∏–Ω—Å–∫–∏–µ –±—É–∫–≤—ã –∏ —Ü–∏—Ñ—Ä—ã">
                </div>
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label>–ü–∞—Ä–æ–ª—å *:</label>
                    <input type="password" name="password" required 
                           placeholder="–ú–∏–Ω–∏–º—É–º 6 —Å–∏–º–≤–æ–ª–æ–≤">
                </div>
                
                <div class="form-group">
                    <label>–¢–µ–ª–µ—Ñ–æ–Ω:</label>
                    <input type="text" name="phone" 
                           placeholder="+79991234567">
                </div>
            </div>
            
            <div class="form-group">
                <label>
                    <input type="checkbox" name="is_manager">
                    –°–æ–∑–¥–∞—Ç—å –∫–∞–∫ –º–µ–Ω–µ–¥–∂–µ—Ä–∞ (–±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø –∫ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—é)
                </label>
                <small style="display: block; margin-top: 5px; color: #666;">
                    –ú–µ–Ω–µ–¥–∂–µ—Ä–∞–º –Ω–∞—á–∏—Å–ª—è–µ—Ç—Å—è 50,000 ‚ÇΩ, –∫–ª–∏–µ–Ω—Ç–∞–º - 1,000 ‚ÇΩ
                </small>
            </div>
            
            <div style="display: flex; gap: 10px; margin-top: 20px;">
                <button type="submit" class="btn btn-success">
                    –°–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                </button>
                <button type="button" class="btn btn-secondary" onclick="hideCreateUserForm()">
                    –û—Ç–º–µ–Ω–∞
                </button>
            </div>
        </form>
    </div>
    
    <!-- –°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π -->
    <div id="usersSection" class="form-section hidden">
        <h3>üë• –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏</h3>
        <div id="usersList">
            <!-- –°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω –∑–¥–µ—Å—å -->
        </div>
    </div>
    
    <!-- –§–æ—Ä–º–∞ –ø–µ—Ä–µ–≤–æ–¥–∞ (–¥–æ—Å—Ç—É–ø–Ω–∞ –∏ –º–µ–Ω–µ–¥–∂–µ—Ä–∞–º) -->
    <div id="transferForm" class="form-section hidden">
        <h3>üí∞ –ü–µ—Ä–µ–≤–æ–¥ –¥–µ–Ω–µ–≥</h3>
        <form id="transferFormElement">
            <div class="form-row">
                <div class="form-group">
                    <label>–ü–æ–ª—É—á–∞—Ç–µ–ª—å:</label>
                    <input type="text" id="recipient" 
                           placeholder="–ù–æ–º–µ—Ä —Å—á–µ—Ç–∞ –∏–ª–∏ —Ç–µ–ª–µ—Ñ–æ–Ω" required>
                </div>
                
                <div class="form-group">
                    <label>–°—É–º–º–∞ (‚ÇΩ):</label>
                    <input type="number" id="amount" min="0.01" step="0.01" 
                           placeholder="0.00" required>
                </div>
            </div>
            
            <div style="display: flex; gap: 10px; margin-top: 20px;">
                <button type="submit" class="btn btn-success">
                    –í—ã–ø–æ–ª–Ω–∏—Ç—å –ø–µ—Ä–µ–≤–æ–¥
                </button>
                <button type="button" class="btn btn-secondary" onclick="hideTransferForm()">
                    –û—Ç–º–µ–Ω–∞
                </button>
            </div>
        </form>
    </div>
    
    <!-- –ò—Å—Ç–æ—Ä–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π -->
    <div id="historySection" class="form-section hidden">
        <h3>üìà –ò—Å—Ç–æ—Ä–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π</h3>
        <div id="historyList">
            <!-- –ò—Å—Ç–æ—Ä–∏—è –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω–∞ –∑–¥–µ—Å—å -->
        </div>
        <button class="btn btn-secondary" onclick="hideHistory()" style="margin-top: 15px;">
            –ó–∞–∫—Ä—ã—Ç—å –∏—Å—Ç–æ—Ä–∏—é
        </button>
    </div>
    
    <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–∏—Å—Ç–µ–º—ã -->
    <div class="grid" style="margin-top: 2rem;">
        <div class="card">
            <h3>üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–∏—Å—Ç–µ–º—ã</h3>
            <p>üë§ –í—Å–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: <strong>12</strong></p>
            <p>üë®‚Äçüíº –ú–µ–Ω–µ–¥–∂–µ—Ä–æ–≤: <strong>2</strong></p>
            <p>üë§ –ö–ª–∏–µ–Ω—Ç–æ–≤: <strong>10</strong></p>
            <p>üí≥ –ù–∞—á–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å –∫–ª–∏–µ–Ω—Ç–∞: <strong>1,000 ‚ÇΩ</strong></p>
            <p>üí∞ –ù–∞—á–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å –º–µ–Ω–µ–¥–∂–µ—Ä–∞: <strong>50,000 ‚ÇΩ</strong></p>
        </div>
        
        <div class="card">
            <h3>üîê –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞</h3>
            <p><strong>–ö–ª–∏–µ–Ω—Ç –º–æ–∂–µ—Ç:</strong></p>
            <ul style="margin-left: 20px;">
                <li>–ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å —Å–≤–æ–π –±–∞–ª–∞–Ω—Å</li>
                <li>–ü–µ—Ä–µ–≤–æ–¥–∏—Ç—å –¥–µ–Ω—å–≥–∏ –¥—Ä—É–≥–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º</li>
                <li>–ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –∏—Å—Ç–æ—Ä–∏—é –æ–ø–µ—Ä–∞—Ü–∏–π</li>
            </ul>
            
            <p><strong>–ú–µ–Ω–µ–¥–∂–µ—Ä –º–æ–∂–µ—Ç:</strong></p>
            <ul style="margin-left: 20px;">
                <li>–í—Å–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∫–ª–∏–µ–Ω—Ç–∞</li>
                <li>–°–æ–∑–¥–∞–≤–∞—Ç—å –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</li>
                <li>–£–¥–∞–ª—è—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</li>
                <li>–ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å–∏—Å—Ç–µ–º—ã</li>
            </ul>
        </div>
    </div>
</div>
{% endblock %}