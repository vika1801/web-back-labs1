{% extends "base1.html" %}

{% block title %}–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç –∫–ª–∏–µ–Ω—Ç–∞{% endblock %}

{% block content %}
<div class="dashboard">
    <!-- –ö–∞—Ä—Ç–æ—á–∫–∞ –±–∞–ª–∞–Ω—Å–∞ -->
    <div class="balance-card">
        <h2 id="balance">{{ "%.2f"|format(user.balance) }} ‚ÇΩ</h2>
        <p>–í–∞—à —Ç–µ–∫—É—â–∏–π –±–∞–ª–∞–Ω—Å</p>
        <p style="margin-top: 10px; font-size: 0.9rem;">
            –ù–æ–º–µ—Ä —Å—á–µ—Ç–∞: <strong>{{ user.account_number }}</strong>
        </p>
    </div>
    
    <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ -->
    <div class="grid">
        <div class="card">
            <h3>üë§ –õ–∏—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h3>
            <p><strong>–§–ò–û:</strong> {{ user.full_name }}</p>
            <p><strong>–õ–æ–≥–∏–Ω:</strong> {{ user.login }}</p>
            <p><strong>–¢–µ–ª–µ—Ñ–æ–Ω:</strong> {{ user.phone or '–ù–µ —É–∫–∞–∑–∞–Ω' }}</p>
            <p><strong>–°—Ç–∞—Ç—É—Å:</strong> –ö–ª–∏–µ–Ω—Ç</p>
        </div>
        
        <div class="card">
            <h3>üí≥ –ë—ã—Å—Ç—Ä—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏</h3>
            <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                <button class="btn btn-primary" onclick="showTransferForm()">
                    üí∏ –ü–µ—Ä–µ–≤–æ–¥ –¥–µ–Ω–µ–≥
                </button>
                <button class="btn btn-secondary" onclick="loadHistory()">
                    üìä –ò—Å—Ç–æ—Ä–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π
                </button>
            </div>
            
            <div style="margin-top: 15px; font-size: 0.9rem; color: #666;">
                <p>–í—ã –º–æ–∂–µ—Ç–µ –ø–µ—Ä–µ–≤–æ–¥–∏—Ç—å –¥–µ–Ω—å–≥–∏ –ø–æ:</p>
                <ul style="margin-left: 20px;">
                    <li>–ù–æ–º–µ—Ä—É —Å—á–µ—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: {{ user.account_number }})</li>
                    <li>–ù–æ–º–µ—Ä—É —Ç–µ–ª–µ—Ñ–æ–Ω–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: {{ user.phone or '+79991234567' }})</li>
                </ul>
            </div>
        </div>
    </div>
    
    <!-- –§–æ—Ä–º–∞ –ø–µ—Ä–µ–≤–æ–¥–∞ -->
    <div id="transferForm" class="form-section hidden">
        <h3>üí∞ –ü–µ—Ä–µ–≤–æ–¥ –¥–µ–Ω–µ–≥</h3>
        <form id="transferFormElement">
            <div class="form-row">
                <div class="form-group">
                    <label>–ü–æ–ª—É—á–∞—Ç–µ–ª—å:</label>
                    <input type="text" id="recipient" 
                           placeholder="–ù–æ–º–µ—Ä —Å—á–µ—Ç–∞ –∏–ª–∏ —Ç–µ–ª–µ—Ñ–æ–Ω (+7...)" required>
                    <small style="display: block; margin-top: 5px; color: #666;">
                        –ü—Ä–∏–º–µ—Ä: ADMIN001 –∏–ª–∏ +79991234567
                    </small>
                </div>
                
                <div class="form-group">
                    <label>–°—É–º–º–∞ (‚ÇΩ):</label>
                    <input type="number" id="amount" min="0.01" step="0.01" 
                           placeholder="0.00" required>
                    <small style="display: block; margin-top: 5px; color: #666;">
                        –î–æ—Å—Ç—É–ø–Ω–æ: {{ "%.2f"|format(user.balance) }} ‚ÇΩ
                    </small>
                </div>
            </div>
            
            <div style="display: flex; gap: 10px; margin-top: 20px;">
                <button type="submit" class="btn btn-success">
                    –í—ã–ø–æ–ª–Ω–∏—Ç—å –ø–µ—Ä–µ–≤–æ–¥
                </button>
                <button type="button" class="btn btn-secondary" onclick="hideTransferForm()">
                    –û—Ç–º–µ–Ω–∞
                </button>
            </div>
        </form>
    </div>
    
    <!-- –ò—Å—Ç–æ—Ä–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π -->
    <div id="historySection" class="form-section hidden">
        <h3>üìà –ò—Å—Ç–æ—Ä–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π</h3>
        <div id="historyList">
            <!-- –ò—Å—Ç–æ—Ä–∏—è –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω–∞ –∑–¥–µ—Å—å -->
        </div>
        <button class="btn btn-secondary" onclick="hideHistory()" style="margin-top: 15px;">
            –ó–∞–∫—Ä—ã—Ç—å –∏—Å—Ç–æ—Ä–∏—é
        </button>
    </div>
    
    <!-- –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è -->
    <div class="card" style="margin-top: 2rem; background: #f0f8ff; border-left-color: #1e3c72;">
        <h3>‚ÑπÔ∏è –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é</h3>
        <ol style="margin-left: 20px;">
            <li>–ù–∞–∂–º–∏—Ç–µ "üí∏ –ü–µ—Ä–µ–≤–æ–¥ –¥–µ–Ω–µ–≥" –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–∞ —Å—Ä–µ–¥—Å—Ç–≤ –¥—Ä—É–≥–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é</li>
            <li>–£–∫–∞–∂–∏—Ç–µ –ø–æ–ª—É—á–∞—Ç–µ–ª—è –ø–æ –Ω–æ–º–µ—Ä—É —Å—á–µ—Ç–∞ –∏–ª–∏ —Ç–µ–ª–µ—Ñ–æ–Ω—É</li>
            <li>–í–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É –ø–µ—Ä–µ–≤–æ–¥–∞</li>
            <li>–ù–∞–∂–º–∏—Ç–µ "üìä –ò—Å—Ç–æ—Ä–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π" –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –≤—Å–µ—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π</li>
            <li>–î–ª—è –≤—ã—Ö–æ–¥–∞ –∏–∑ —Å–∏—Å—Ç–µ–º—ã –Ω–∞–∂–º–∏—Ç–µ "üö™ –í—ã—Ö–æ–¥" –≤ –ø—Ä–∞–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É</li>
        </ol>
    </div>
</div>
{% endblock %}